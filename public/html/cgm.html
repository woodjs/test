<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>cgm</title>
</head>
<body>
  <h1>here is top window!</h1>
  <iframe id="frame" src="../cgm/0000098062.htm" onload="onLoad(this)" onunload="onUnload(this)"  onerror="onError(this)"></iframe>
  <button>跳转</button>
  <script type="text/javascript">
    var frame = document.getElementById('frame');
    var btn = document.querySelector('button');

    btn.addEventListener('click', function () {
      frame.setAttribute('src', 'http://localhost:1212/test/public/cgm/0000098066.htm');
    })
  </script>

  <script type="text/javascript">

    function onLoad(that) {

      console.log(that.contentWindow.location.toString());
      console.log('loaded!!!');

      frame.contentWindow.addEventListener('click', function () {
        console.log('child document clicked!');
      });
    }

    function onUnload(that) {
      console.log(that.contentWindow.location.toString());
      console.log('unloaded!!!');
    }

    function onError(that) {
      console.log(that.contentWindow.location.toString());
      console.log('error!!!');
    }

    setInterval(function () {
      console.log('current src:' + frame.contentWindow.location.toString());
    }, 1000);
  </script>
</body>
</html>